@(pendingRaces: Seq[(Race, User, Option[DateTime])], currentName: Option[String])

@import org.joda.time.DateTime

@secondsTo(t: DateTime) = {start in @((t.getMillis - DateTime.now.getMillis) / 1000)s, hurry up!}

@main() {

  <div class="content">

    <p>Hello @currentName.getOrElse("Anonymous")!
      <a href="#" id="change-name" data-name="@currentName.getOrElse("")" data-url="@routes.Application.setName()">change name</a> </p>

    <form action="@routes.Application.createRace" method="post">
      <input type="submit" value="Create new race" class="btn-new-race">
    </form>

    @if(pendingRaces.nonEmpty) {
      <p>Or join pending:</p>
      @for((r, master, startTimeMaybe) <- pendingRaces) {
        <li><a href="@routes.Game.playRace(r.id.stringify)">By @master.name (@startTimeMaybe.map(secondsTo).getOrElse("Not started yet"))</a></li>
      }
    }

    <p>&nbsp;</p>
    <p>--</p>
    <p>Tack is a realtime multiplayer sailboat racing game, in your browser. Being in its early stage, it's a bit rough. You'll need Chrome browser on a recent computer.</p>
    <p>Tack is open source: <a href="https://github.com/etaque/tacks">Github repository</a>. Also, you can follow me (<a href="https://twitter.com/etaque">@@etaque</a>) on Twitter.</p>

  </div>

}
